<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<link rel="stylesheet" type="text/css" href="./static/highlight/styles/monokai-sublime.css">
<script type="text/javascript" src="./static/highlight/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<title>GoHome-ui-v1</title>
</head>
<body>
	<div>
		<h3>mysql知识点</h3>
		<pre>
<code>
<h4>mysql查看数据表是否存在!</h4>
/**
 * @param string $dbName 库名
 * @param string $tableName 数据表名称
 * @return bool
 */
public function checkTableExist($dbName, $tableName)
{
	// information_schema 是mysql自带的库 记录着数据库元数据， 如：库名、表名、列的数据类型、访问权限等信息
	// information_schema 实际上是视图,不是基本表
	$sql = "SELECT table_name FROM information_schema.tables WHERE table_schema='{$dbName}' AND table_name='{$tableName}' limit 1";
	$tableInfo = $this->query($sql);
	return !empty($tableInfo);
}
</code>
		</pre>

		<pre>
<code>
<h4>创建分区表</h4>
/**
 * @param string $defaultTable 数据表名称
 * @param string $partitionTable 分区数据表名称
 * @param string $dbName 库名
 * @return bool
 */
public function crearePartitionTable($defaultTable, $partitionTable, $dbName)
{
	$sql = "SELECT table_name FROM information_schema.tables WHERE table_schema='{$dbName}' AND table_name='{$partitionTable}' limit 1";
	$tableInfo = $this->query($sql);
	if (empty($tableInfo)) {
		$result = $this->execute(CREATE table IF NOT EXISTS {$partitionTable} Like {$defaultTable});
		if ($result === false) {
			return false;
		}
	}
	return true;
}
</code>
		</pre>
	</div>
</body>
</html>












